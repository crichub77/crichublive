<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>CricHub</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.css"> <!-- Updated Plyr CDN -->
  <link href="https://fonts.googleapis.com/css2?family=Orion+Esperanto+Dika&display=swap" rel="stylesheet"> <!-- Orion Esperanto Dika font -->
  <link href="https://fonts.googleapis.com/css2?family=Copperplate&display=swap" rel="stylesheet"> <!-- Copperplate font -->
  <script src="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.polyfilled.min.js"></script> <!-- Plyr JS with polyfills -->
  <script src="https://cdn.jsdelivr.net/npm/hls.js@1.1.4/dist/hls.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
  <style>
    html {
      font-family: 'Orion Esperanto Dika', sans-serif; /* Updated font */
      background: #000; /* Set background to black */
      margin: 0;
      padding: 0;
    }
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      color: #DAA520; /* Dark yellow color */
    }
    video {
      width: 100%;
      max-width: 800px; /* Set maximum width for the video player */
      height: auto; /* Maintain aspect ratio */
    }
    .loading {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .loading-text {
      text-align: center;
      font-size: 24px;
    }
    /* Telegram banner styles */
    #telegram-banner {
      display: none; /* Initially hidden */
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: black; /* Black background */
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
      z-index: 10000;
      text-align: center;
      width: 250px; /* Adjusted width */
      height: 90px; /* Adjusted height */
    }
    #telegram-banner h2 {
      color: white; /* White text for the title */
      margin: 0 0 10px; /* Margin below the title */
      font-family: 'Copperplate', sans-serif; /* Changed font for the popup text */
      text-shadow: 0 0 5px #ffcc00, 0 0 10px #ffcc00; /* Glowing effect */
      animation: glow 1.5s infinite alternate; /* Animation for glowing effect */
    }
    @keyframes glow {
      0% {
        text-shadow: 0 0 5px #ffcc00, 0 0 10px #ffcc00;
      }
      100% {
        text-shadow: 0 0 10px #ffcc00, 0 0 20px #ffcc00;
      }
    }
    #telegram-banner button {
      background-color: orange; /* Orange for Join button */
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 5px; /* Rounded corners */
      cursor: pointer;
      margin: 5px;
      width: 100px; /* Fixed width for buttons */
    }
    #telegram-banner .cancel-button {
      background-color: red; /* Red for Cancel button */
      border-radius: 5px; /* Rounded corners */
    }
  </style>
</head>
<body>
  <div id="loading" class="loading">
    <div class="loading-text">Loading CricHub...</div>
  </div>

  <video id="video" autoplay controls crossorigin playsinline style="--plyr-color-main:#15b4ff">
    <source id="m3u8-url" src="" type="application/x-mpegURL">
    Your browser does not support the video tag.
  </video>

  <div id="telegram-banner">
    <h2>Join CricHub Telegram Channel</h2>
    <button onclick="window.open('https://t.me/+_AupOjqXiLNlNmY1', '_blank')">Join</button>
    <button class="cancel-button" onclick="document.getElementById('telegram-banner').style.display='none'">Cancel</button>
  </div>

  <script>
    // Get the video URL from the query parameters
    var urlParams = new URLSearchParams(window.location.search);
    var maxvalue = urlParams.get("videoUrl");

    // Set the video source to the provided URL
    if (maxvalue) {
      document.getElementById("m3u8-url").setAttribute("src", maxvalue);
    }

    // Initialize Plyr
    const player = new Plyr('#video', {
      controls: [
        'play', 'progress', 'current-time', 'mute', 'volume', 'fullscreen', 'quality' // Added quality control
      ],
      quality: {
        default: 720,
        options: [360, 480, 720, 1080], // Example quality options
        forced: true,
        onChange: (newQuality) => {
          console.log('Quality changed to:', newQuality);
        },
      },
    });

    // Hide loading screen and show the video player once loaded
    player.on('ready', () => {
      document.getElementById('loading').style.display = 'none';
    });

    // Show Telegram banner on page load
    $(document).ready(function() {
      $("#telegram-banner").fadeIn();
    });
  </script>
</body>
</html>
